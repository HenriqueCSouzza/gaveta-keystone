(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8799:function(e,t,n){"use strict";n.d(t,{H:function(){return b},P:function(){return C}});var r=n(7896),o=n(5445),i=n(2784),l=n(5632),a=(n(5631),n(487),n(891),n(5273),n(9575)),s=n(1511),c=n(444),d=n(9097),g=n.n(d);const u=()=>{var e;const{spacing:t}=(0,o.Fg)(),{adminConfig:n}=(0,a.jf)();return null!==(e=n.components)&&void 0!==e&&e.Logo?(0,o.tZ)(n.components.Logo,null):(0,o.tZ)(o.H3,null,(0,o.tZ)(g(),{href:"/",passHref:!0},(0,o.tZ)("a",{css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,o.tZ)("defs",null,(0,o.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,o.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,o.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,o.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6")))},p=e=>{let{href:t,children:n,isSelected:r}=e;const{colors:i,palette:a,spacing:c,radii:d,typography:g}=(0,o.Fg)(),u=(0,l.useRouter)(),p=void 0!==r?r:u.pathname===t;return(0,o.tZ)("li",null,(0,o.tZ)(s.rU,{"aria-current":!!p&&"location",href:t,css:{background:"transparent",borderBottomRightRadius:d.xsmall,borderTopRightRadius:d.xsmall,color:a.neutral700,display:"block",fontWeight:g.fontWeight.medium,marginBottom:c.xsmall,marginRight:c.xlarge,padding:`${c.small}px ${c.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:i.backgroundHover,color:i.linkHoverColor},"&[aria-current=location]":{background:a.neutral200,color:a.neutral900}}},n))},m=e=>{let{item:t}=e;const{apiPath:n}=(0,a.jf)(),{spacing:r,typography:i}=(0,o.Fg)();return(0,o.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:r.xlarge,marginBottom:0}},!(!t||"authenticated"!==t.state)&&(0,o.tZ)("div",{css:{fontSize:i.fontSize.small}},"Signed in as ",(0,o.tZ)("strong",{css:{display:"block"}},t.label)),t&&"authenticated"===t.state&&(0,o.tZ)(c.S,null))},h=e=>{let{authenticatedItem:t,children:n}=e;const{spacing:r}=(0,o.Fg)();return(0,o.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,o.tZ)(m,{item:t}),(0,o.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:r.xlarge}},(0,o.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},n)))},f=e=>{let{list:t}=e;const n=(0,l.useRouter)();return(0,o.tZ)(p,{isSelected:n.pathname.split("/")[1]===`/${t.path}`.split("/")[1],href:`/${t.path}${t.isSingleton?"/1":""}`},t.label)},v=e=>{let{lists:t=[],include:n=[]}=e;const r=n.length>0?t.filter((e=>n.includes(e.key))):t;return(0,o.tZ)(i.Fragment,null,r.map((e=>(0,o.tZ)(f,{key:e.key,list:e}))))},Z=()=>{var e;const{adminMeta:{lists:t},adminConfig:n,authenticatedItem:r,visibleLists:i}=(0,a.jf)();if("loading"===i.state)return null;if("error"===i.state)return(0,o.tZ)(o.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},i.error instanceof Error?i.error.message:i.error[0].message);const l=Object.keys(t).map((e=>i.lists.has(e)?t[e]:null)).filter((e=>Boolean(e)));return null!==n&&void 0!==n&&null!==(e=n.components)&&void 0!==e&&e.Navigation?(0,o.tZ)(n.components.Navigation,{authenticatedItem:r,lists:l}):(0,o.tZ)(h,{authenticatedItem:r},(0,o.tZ)(p,{href:"/"},"Dashboard"),(0,o.tZ)(v,{lists:l}))},b=80,x=e=>(0,o.tZ)(i.Fragment,null,(0,o.tZ)("style",null,"body { overflow: hidden; }"),(0,o.tZ)("div",(0,r.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${b}px auto`,height:"100vh",isolation:"isolate"}},e))),y=e=>(0,o.tZ)("aside",(0,r.Z)({css:{minWidth:0,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e)),k=e=>{const{colors:t,spacing:n}=(0,o.Fg)();return(0,o.tZ)("main",(0,r.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},C=e=>{let{children:t,header:n,title:r}=e;const{colors:i,spacing:l}=(0,o.Fg)();return(0,o.tZ)(x,null,(0,o.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${i.border}`,display:"flex",justifyContent:"space-between",paddingLeft:l.xlarge,paddingRight:l.xlarge}},(0,o.tZ)(u,null)),(0,o.tZ)("header",{css:{alignItems:"center",backgroundColor:i.background,borderBottom:`1px solid ${i.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:l.xlarge,paddingRight:l.xlarge}},(0,o.tZ)("title",null,r?`Keystone - ${r}`:"Keystone"),n),(0,o.tZ)(y,null,(0,o.tZ)(Z,null)),(0,o.tZ)(k,null,t))}},8752:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(2784),o=n(7074);n(5445);const i=(0,o.c)(r.createElement(r.Fragment,null,r.createElement("line",{x1:12,y1:5,x2:12,y2:19}),r.createElement("line",{x1:5,y1:12,x2:19,y2:12})),"PlusIcon")},5356:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5384)}])},5384:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(7896),o=n(2784),i=n(5445),l=n(8752),a=n(6759),s=n(1720),c=(n(7268),n(9378),n(8799)),d=n(81),g=n(794),u=n(9575),p=n(1511);n(5632),n(5631),n(487),n(891),n(5273),n(444),n(9097),n(5364),n(8999),n(6765),n(4002),n(7132),n(7668),n(1168),n(5976),n(581),n(9403);const m=e=>{let{listKey:t,count:n,hideCreate:r}=e;const{colors:o,palette:s,radii:c,spacing:d}=(0,i.Fg)(),g=(0,u.sm)(t);return(0,i.tZ)("div",{css:{position:"relative"}},(0,i.tZ)(p.rU,{href:`/${g.path}${g.isSingleton?"/1":""}`,css:{backgroundColor:o.background,borderColor:o.border,borderRadius:c.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:d.large,textDecoration:"none",":hover":{borderColor:s.blue400},":hover h3":{textDecoration:"underline"}}},(0,i.tZ)("h3",{css:{margin:`0 0 ${d.small}px 0`}},g.label," "),g.isSingleton?null:"success"===n.type?(0,i.tZ)("span",{css:{color:o.foreground,textDecoration:"none"}},n.count," item",1!==n.count?"s":""):"error"===n.type?n.message:"loading"===n.type?(0,i.tZ)(a.xg,{label:`Loading count of ${g.plural}`,size:"small",tone:"passive"}):"No access"),!1===r&&!g.isSingleton&&(0,i.tZ)(h,{title:`Create ${g.singular}`,href:`/${g.path}/create`},(0,i.tZ)(l.p,{size:"large"}),(0,i.tZ)(i.TX,null,"Create ",g.singular)))},h=e=>{const t=(0,i.Fg)();return(0,i.tZ)(p.rU,(0,r.Z)({css:{alignItems:"center",backgroundColor:t.palette.neutral400,border:0,borderRadius:t.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:t.spacing.large,top:t.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{color:"white",backgroundColor:t.tones.positive.fill[0]}}},e))},f=()=>{const{adminMeta:{lists:e},visibleLists:t}=(0,u.jf)(),n=(0,o.useMemo)((()=>d.Ps`
    query {
      keystone {
        adminMeta {
          lists {
            key
            hideCreate
          }
        }
      }
      ${Object.values(e).filter((e=>!e.isSingleton)).map((e=>`${e.key}: ${e.gqlNames.listQueryCountName}`)).join("\n")}
    }`),[e]);let{data:r,error:l}=(0,g.a)(n,{errorPolicy:"all"});const p=(0,s.m)(r,null===l||void 0===l?void 0:l.graphQLErrors);return(0,i.tZ)(c.P,{header:(0,i.tZ)(i.X6,{type:"h3"},"Dashboard")},"loading"===t.state?(0,i.tZ)(i.M5,{css:{height:`calc(100vh - ${c.H}px)`}},(0,i.tZ)(a.xg,{label:"Loading lists",size:"large",tone:"passive"})):(0,i.tZ)(i.gF,{as:"ul",gap:"large",paddingY:"xlarge",css:{paddingLeft:"0px",marginBottom:"0px"}},"error"===t.state?(0,i.tZ)("span",{css:{color:"red"}},t.error instanceof Error?t.error.message:t.error[0].message):Object.keys(e).map((e=>{var n,o;if(!t.lists.has(e))return null;const l=p.get(e);return(0,i.tZ)(m,{count:r?l.errors?{type:"error",message:l.errors[0].message}:{type:"success",count:r[e]}:{type:"loading"},hideCreate:null!==(n=null===r||void 0===r||null===(o=r.keystone.adminMeta.lists.find((t=>t.key===e)))||void 0===o?void 0:o.hideCreate)&&void 0!==n&&n,key:e,listKey:e})}))))}}},function(e){e.O(0,[888,774,179],(function(){return t=5356,e(e.s=t);var t}));var t=e.O();_N_E=t}]);